# huyuashi
# ふゆあし
### 冬の足跡、残そう。
(URL準備でき次第追加)
(サムネイル画像準備でき次第追加)

## サービス概要
雪かき作業記録アプリです。積雪情報と雪かきの時間を記録することで、日々の頑張りを見える形で残します。また、記録と積雪予想を元に作業時間予想を立てて冬の生活をサポートします。

## このサービスへの思い・作りたい理由
雪の降る地域に住んでいる経験をもとにアプリを制作しようと思いました。<br>
「せっかく雪かきしても数時間にはまた降り積もってしまう」<br>
すぐに埋もれてしまうけれど、努力の結果を残せるようにしようと思いました。<br>
「さっき雪かきをしたこの地点にはどれくらい雪が積もるだろう」<br>
「今までの作業ペースからして、どれくらいで片付けられるだろう」<br>
天気予報を見て考えるこれらのことも、雪かきの記録を積み重ねることで予想の一助になればと思います。

## ユーザー層について
 - 定期的に雪かきが必要な地域にお住まいの方

## サービスの利用イメージ
 - 雪かき記録機能
 雪かき作業時間と積雪深を関連づけて保存します。<br>
 (例：積雪深XXcmの時に作業開始：雪かき作業h時間m分)

 - 積雪深取得機能(アメダス)
 ユーザーが選択したアメダスの積雪深観測地点の情報を元に、積雪深と気温の情報を取得します。
   - 気象庁アメダスの積雪深情報を活用します。<br>
     - アメダスの全国観測情報は、https://www.jma.go.jp/bosai/amedas/data/map/[yyyymmddhh0000].json の形式で取得します。<br>
     - アメダス観測地点情報は、積雪観測地点のcsvファイル（適用日：2025年11月20日）をインポートして参照します。https://www.jma.go.jp/jma/kishou/know/amedas/kaisetsu.html<br>

   気象庁の積雪深観測地点の積雪深情報を1時間ごとにアプリ側の定時処理(毎時8分)で取得し、データベースに保存しておきます。観測地点の情報をデータベースから取得することにより、過度のアクセスを防ぎます。

 - 3日以内に観測地点で実施した雪かき記録があり、積雪深が取得済の場合、「前回雪かきからの積雪変化量」を表示します。<br>

 - 雪かき作業時間予測機能(概算)(本リリースまでに反映予定)*
   - 年内である程度の雪かきログが溜まったら機能解禁とします。単回帰分析による概算予測を実施します。ruby計算で最小二乗法で求める想定。<br>

 - ~~ユーザー所在地積雪深取得機能(概算)(本リリースまでに反映予定)*~~
~~次回以降の雪かき開始時、ユーザー所在地での概算積雪深さを減算方式で算出予定です。~~<br>
~~(アメダス最新積雪深 - 前回雪かき終了時の積雪深)~~<br>
~~2回目以降の積雪深として上記の計算値を適用し、よりユーザーの所在地の状況に近い積雪深情報の提供を目指します。~~<br>
~~※融雪や圧雪などの影響を考慮し、減算方式で算出した値が0以下になった場合はアメダス最新積雪深を記録することとします。~~<br>

 - ~~ユーザー所在地n時間後積雪深予測機能(概算)(本リリースまでに反映予定)*~~
 - ~~ユーザー所在地積雪深取得機能で算出した数値とn時間後積雪深(アメダス)を合算し、n時間後積雪深予想を取得します。~~<br>

## サービスの差別化ポイント・推しポイント
雪かきに関連するアプリとして、雪かきをする人と雪かきを依頼したい人との間を繋ぐマッチングアプリがあります。一方、本アプリでは自分で雪かきをする人が対象となります。

## 機能候補
MVPリリース
- [x] ユーザー登録・ログイン機能(devise)
- [x] 観測地点登録機能(初めはプルダウン選択式とする)
- [x] 積雪深取得機能(アメダスの観測地点データをwheneverの定時処理で取得し、データベースに保存。保存した情報を参照する)
- [x] 雪かきタイマー機能(スタート/ストップボタン押下した時間と積雪深を組み合わせて1つの雪かきレコードにする)
- [x] 雪かきログ確認機能(ユーザーが雪かきした時の開始時間、終了時間、積雪深を一覧で見られるようにする)

本リリースまでに追加内容(予定)
- [ ] レスポンシブデザイン対応などUI整備(tailwindcss-rails)
- [ ] お問い合わせページ作成
- [ ] プライバシーポリシーページ作成
- [ ] 利用規約ページ作成
- [ ] 雪かきログの視覚最適化(chartkick)
- [ ] 雪かきログ項目追加(例：雪質、疲労度などの追加情報をラジオボタンで簡単に記録できるようにする)
- [ ] 雪かきコメント追加機能(作業後に簡単なメモをつけられるようにする)
- [ ] 観測地点候補の候補選出機能(geocoder)<br>
      観測地点選択時のみユーザー位置情報を取得。ユーザー所在地に近い観測地点を選択候補としてピックアップできるようにする。
- [ ] ユーザー所在地積雪深取得機能(概算)反映*
- [ ] タグつけ機能(屋根雪の対応をしたときの雪かきログだけマーカーをつけるなど)
- [ ] 雪かき時間予測：積雪量と雪かき作業時間ログを元に予想作業時間を算出(回帰分析)

検討中
- [ ] 外部アカウント認証(omniauth)
- [ ] PWA対応(検討中)
- [ ] PWAプッシュ通知(検討中)
  - 積雪がユーザー指定の数値以上になった時にアラートを送信する機能を想定

## 使用する技術スタック
- Ruby 3.4.2
- Ruby on Rails 8.0.4
- TailwindCSS
- PostgreSQL
- render
- 使用予定のライブラリ<br>
  devise / tailwindcss-rails / chartkick / geocoder / whenever / omniauth

## 画面遷移図
[figma](https://www.figma.com/design/72tcu2TC9kywHrBiM5Tw8D/%E3%81%B5%E3%82%86%E3%81%82%E3%81%97-%E7%94%BB%E9%9D%A2%E9%81%B7%E7%A7%BB%E5%9B%B3?node-id=0-1&t=4a4ZDT167KoxGeQB-1)

## ER図
[![Image from Gyazo](https://i.gyazo.com/4e9d2363190687b6d757b448b195bbe8.png)](https://gyazo.com/4e9d2363190687b6d757b448b195bbe8)